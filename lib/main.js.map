{
  "version": 3,
  "file": "",
  "sourceRoot": "",
  "sources": [
    "../src/main.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\n\n'use strict'\n\n\n############################################################################################################\nCND                       = require 'cnd'\nrpr                       = CND.rpr\nbadge                     = 'SVGTTF/MAIN'\ndebug                     = CND.get_logger 'debug',     badge\nwarn                      = CND.get_logger 'warn',      badge\ninfo                      = CND.get_logger 'info',      badge\nurge                      = CND.get_logger 'urge',      badge\nhelp                      = CND.get_logger 'help',      badge\nwhisper                   = CND.get_logger 'whisper',   badge\necho                      = CND.echo.bind CND\n#...........................................................................................................\n@types                    = require './types'\n{ isa\n  validate\n  type_of }               = @types\nOT                        = require 'opentype.js'\n\n#-----------------------------------------------------------------------------------------------------------\n@get_metrics = ( me ) ->\n  R             = {}\n  R.ascent      = me.otjsfont.tables.os2.sTypoAscender\n  R.upm         = me.otjsfont.unitsPerEm\n  R.baseline    = R.ascent\n  R.descent     = R.upm - R.baseline\n  return R\n\n#-----------------------------------------------------------------------------------------------------------\n@_transform_fn_as_text = ( transform_fn ) ->\n  validate.svgttf_svg_transform_fn transform_fn\n  [ name, p..., ] = transform_fn\n  if p.length is 1 then p = p[ 0 ]\n  return \"#{name}(#{p})\" if ( isa.text p ) or ( isa.float p )\n  return \"#{name}(#{p.join ','})\" if isa.list p\n\n#-----------------------------------------------------------------------------------------------------------\n@_transform_as_text = ( transform ) ->\n  return null unless transform?\n  validate.list transform\n  return null if transform.length is 0\n  return \"transform='#{(@_transform_fn_as_text tf for tf in transform).join ' '}'\"\n\n#-----------------------------------------------------------------------------------------------------------\n@pathelement_from_glyphidx = ( me, glyph_idx, size = null, transform ) ->\n  pathdata = @pathdata_from_glyphidx me, glyph_idx, size\n  return null if ( not pathdata? ) or ( pathdata is '' )\n  @_pathelement_from_pathdata me, pathdata, transform\n\n#-----------------------------------------------------------------------------------------------------------\n@pathdata_from_glyphidx = ( me, glyph_idx, size = null ) ->\n  ### TAINT should implement fallback value for case when glyph not found ###\n  validate.svgttf_font me\n  validate.count glyph_idx\n  validate.nonnegative size if size?\n  return @_fast_pathdata_from_glyphidx me, glyph_idx, size\n\n#-----------------------------------------------------------------------------------------------------------\n@_fast_pathdata_from_glyphidx = ( me, glyph_idx, size = null ) ->\n  ### TAINT should implement fallback value for case when glyph not found ###\n  path_precision  = 0\n  x               = 0\n  y               = 0\n  glyph           = me.otjsfont.glyphs.glyphs[ glyph_idx ]\n  return null unless glyph?\n  size            = size ? me.otjsfont.unitsPerEm\n  path            = glyph.getPath x, y, size\n  return path.toPathData path_precision\n\n#-----------------------------------------------------------------------------------------------------------\n@pathdataplus_from_glyphidx = ( me, glyph_idx, size = null ) ->\n  ### TAINT should implement fallback value for case when glyph not found ###\n  validate.svgttf_font me\n  validate.count glyph_idx\n  validate.nonnegative size if size?\n  return @_fast_pathdataplus_from_glyphidx me, glyph_idx, size\n\n#-----------------------------------------------------------------------------------------------------------\n@_fast_pathdataplus_from_glyphidx = ( me, glyph_idx, size = null ) ->\n  ### TAINT should implement fallback value for case when glyph not found ###\n  pathdata        = null\n  glyphname       = null\n  path_precision  = 0\n  x               = 0\n  y               = 0\n  glyph           = me.otjsfont.glyphs.glyphs[ glyph_idx ]\n  if glyph?\n    size            = size ? me.otjsfont.unitsPerEm\n    path            = glyph.getPath x, y, size\n    pathdata        = path.toPathData path_precision\n    glyphname       = glyph.name\n    return { pathdata, glyphname, chr: ( String.fromCodePoint cid ), } if ( cid = glyph.unicode )?\n  return { pathdata, glyphname, chr: '', }\n\n#-----------------------------------------------------------------------------------------------------------\n@_pathelement_from_pathdata = ( me, pathdata, transform = null ) ->\n  if ( tf_txt = @_transform_as_text transform )?\n    return \"<path #{tf_txt} d='#{pathdata}'/>\"\n  return \"<path d='#{pathdata}'/>\"\n\n#-----------------------------------------------------------------------------------------------------------\n@_get_svg = ( me, x1, y1, x2, y2, content ) ->\n  validate.float x1\n  validate.float y1\n  validate.float x2\n  validate.float y2\n  R = []\n  R.push \"<?xml version='1.0' standalone='no'?>\"\n  R.push \"<svg xmlns='http://www.w3.org/2000/svg' \"\n  ### TAINT make optional to adapt to SVG v2, see https://css-tricks.com/on-xlinkhref-being-deprecated-in-svg/ ###\n  R.push \"xmlns:xlink='http://www.w3.org/1999/xlink' \"\n  R.push \"viewBox='#{x1} #{y1} #{x2} #{y2}'>\"\n  switch type = type_of content\n    when 'text'   then R.push content\n    when 'list'   then R = R.concat content\n    else throw new Error \"^svgttf/_get_svg_from_glyphidx@3337^ expected a text or a list, got a #{type}\"\n  R.push \"</svg>\"\n  return R.join ''\n\n#-----------------------------------------------------------------------------------------------------------\n@svg_from_glyphidx = ( me, glyph_idx, size ) ->\n  pathelement = @pathelement_from_glyphidx me, glyph_idx, size #, transform\n  ### TAINT derive coordinates from metrics ###\n  return @_get_svg me, 0, -800, 1000, 1000, pathelement\n\n#-----------------------------------------------------------------------------------------------------------\n@_get_coordinate_hints = ( me ) ->\n  R = []\n  R.push \"<circle cx='0' cy='0' r='20' style='fill:red;'/>\"\n  R.push \"<circle cx='0' cy='0' r='100' style='fill-opacity:0;stroke:red;stroke-width:10;'/>\"\n  R.push \"<circle cx='0' cy='0' r='200' style='fill-opacity:0;stroke:red;stroke-width:10;'/>\"\n  R.push \"<circle cx='0' cy='0' r='300' style='fill-opacity:0;stroke:red;stroke-width:10;'/>\"\n  R.push \"<circle cx='0' cy='0' r='400' style='fill-opacity:0;stroke:red;stroke-width:10;'/>\"\n  R.push \"<circle cx='0' cy='0' r='500' style='fill-opacity:0;stroke:red;stroke-width:20;'/>\"\n  R.push \"<circle cx='0' cy='0' r='600' style='fill-opacity:0;stroke:red;stroke-width:10;'/>\"\n  R.push \"<circle cx='0' cy='0' r='700' style='fill-opacity:0;stroke:red;stroke-width:10;'/>\"\n  R.push \"<circle cx='0' cy='0' r='800' style='fill-opacity:0;stroke:red;stroke-width:10;'/>\"\n  R.push \"<circle cx='0' cy='0' r='900' style='fill-opacity:0;stroke:red;stroke-width:10;'/>\"\n  R.push \"<circle cx='0' cy='0' r='1000' style='fill-opacity:0;stroke:red;stroke-width:20;'/>\"\n  R.push \"<line x1='0' y1='0' x2='950' y2='950' style='stroke:red;stroke-width:10;'/>\"\n  R.push \"<rect x='0' y='0' width='1000' height='1000' style='fill-opacity:0;stroke:red;stroke-width:10;'/>\"\n  return R\n\n#-----------------------------------------------------------------------------------------------------------\n@svg_from_harfbuzz_linotype = ( me, harfbuzz_linotype, size ) ->\n  ### TAINT code duplication ###\n  validate.svgttf_harfbuzz_linotype harfbuzz_linotype\n  x = 0\n  y = 0\n  R = []\n  for sort in harfbuzz_linotype\n    transform   = [ [ 'translate', x, y, ], ]\n    ### TAINT figure out relationship between size and upem ###\n    x          += sort.x_advance * size\n    if ( pathelement = @pathelement_from_glyphidx me, sort.gid, size, transform )?\n      R.push '\\n' + \"<!--gid:#{sort.gid}-->\" + pathelement\n  R.push '\\n'\n  return @_get_svg me, 0, -800, x, 1000, R\n\n#-----------------------------------------------------------------------------------------------------------\n@get_svg_symbol_font = ( me ) ->\n  # debug '^33431^', ( k for k of me.otjsfont.glyphs.glyphs ) #.glyphs[ glyph_idx ]\n  # debug '^33431^', ( type_of me.otjsfont.glyphs.glyphs ) #.glyphs[ glyph_idx ]\n  R = []\n  for glyph_idx, glyph of me.otjsfont.glyphs.glyphs\n    # continue unless 12 < glyph_idx < 22 ### !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! ###\n    # debug glyph_idx, glyph\n    ### TAINT must derive bounding box from outline ###\n    # glyph.advanceWidth\n    # glyph.leftSideBearing\n    x1      = 0\n    y1      = -800\n    x2      = 1000\n    y2      = 1000\n    vbx_txt = \"'#{x1},#{y1},#{x2},#{y2}'\"\n    name    = glyph.name ? 'UNKNOWN'\n    id      = \"g#{glyph_idx}\"\n    ### TAINT set width, height; ###\n    # width='1000' height='1000' viewBox='0,-800,1000,1000'\n    R.push \"<symbol id='#{id}' viewBox=#{vbx_txt}>\"\n    if ( cid = glyph.unicode )?\n      # glyph.unicodes\n      cid_hex = ( cid.toString 16 ).padStart 4, '0'\n      sfncr   = \"u/#{cid_hex}\"\n      uglyph  = String.fromCodePoint cid\n      R.push \"<!-- #{sfncr} #{uglyph} -->\"\n    else\n      R.push \"<!-- #{name} -->\"\n    pathdata = @_fast_pathdata_from_glyphidx me, glyph_idx, null\n    ### TAINT might consider to leave out glyphs without outline altogether, but OTOH symbol should not\n    cause 404 not found when requested, so we leave those in FTM: ###\n    if pathdata? and ( pathdata isnt '' )\n      R.push @_pathelement_from_pathdata me, pathdata\n    R.push \"</symbol>\\n\"\n  ### TAINT we don't need a bounding box at all for an SVG with only symbols ###\n  ### TAINT alternatively, may display some sample glyphs in font symbol SVG so to have visual feedback on opening ###\n  return @_get_svg me, 0, 0, 10000, 10000, R\n\n\n#===========================================================================================================\n#\n#-----------------------------------------------------------------------------------------------------------\n@font_from_path = ( path ) ->\n  validate.nonempty_text path\n  otjsfont = OT.loadSync path\n  return { path, otjsfont, }\n\n\n# ############################################################################################################\n# if require.main is module then do =>\n\n\n\n"
  ]
}